import{_ as a,c as s,o as e,at as n}from"./chunks/framework.BV4VMCSO.js";const c=JSON.parse('{"title":"Faraday Migration for Windows Compatibility","description":"","frontmatter":{},"headers":[],"relativePath":"development/architecture/faraday-migration.md","filePath":"development/architecture/faraday-migration.md"}'),t={name:"development/architecture/faraday-migration.md"};function l(r,i,o,p,h,d){return e(),s("div",null,i[0]||(i[0]=[n(`<h1 id="faraday-migration-for-windows-compatibility" tabindex="-1">Faraday Migration for Windows Compatibility <a class="header-anchor" href="#faraday-migration-for-windows-compatibility" aria-label="Permalink to &quot;Faraday Migration for Windows Compatibility&quot;">​</a></h1><h2 id="overview" tabindex="-1">Overview <a class="header-anchor" href="#overview" aria-label="Permalink to &quot;Overview&quot;">​</a></h2><p>This document explains the migration from <code>typhoeus</code> to <code>faraday</code> HTTP client to resolve Windows CI/CD compatibility issues.</p><h2 id="problem" tabindex="-1">Problem <a class="header-anchor" href="#problem" aria-label="Permalink to &quot;Problem&quot;">​</a></h2><p>The original OpenAPI-generated Ruby client used the <code>typhoeus</code> gem, which depends on <code>libcurl</code>. This created platform-specific issues:</p><ul><li><strong>Windows CI/CD failures</strong>: <code>Could not open library &#39;libcurl&#39;</code> errors on GitHub Actions Windows runners</li><li><strong>Complex dependency management</strong>: Required external system libraries</li><li><strong>Platform inconsistencies</strong>: Different behavior across Windows, macOS, and Linux</li></ul><h2 id="solution-faraday-migration" tabindex="-1">Solution: Faraday Migration <a class="header-anchor" href="#solution-faraday-migration" aria-label="Permalink to &quot;Solution: Faraday Migration&quot;">​</a></h2><h3 id="why-faraday" tabindex="-1">Why Faraday? <a class="header-anchor" href="#why-faraday" aria-label="Permalink to &quot;Why Faraday?&quot;">​</a></h3><ol><li><strong>Pure Ruby</strong>: Uses built-in <code>Net::HTTP</code>, no external dependencies</li><li><strong>Cross-platform</strong>: Identical behavior on all platforms</li><li><strong>OpenAPI Generator support</strong>: Native support with <code>--library=faraday</code></li><li><strong>Extensible</strong>: Rich middleware ecosystem for custom requirements</li></ol><h3 id="implementation" tabindex="-1">Implementation <a class="header-anchor" href="#implementation" aria-label="Permalink to &quot;Implementation&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Updated client generation command</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --rm</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -v</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">PWD</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}:/local&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  openapitools/openapi-generator-cli</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> generate</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -i</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /local/openapi/openapi.yaml</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -g</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ruby</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -o</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /local/generated-client</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  --library=faraday</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  --additional-properties=gemName=cyber_trackr_client,moduleName=CyberTrackrClient</span></span></code></pre></div><h3 id="updated-dependencies" tabindex="-1">Updated Dependencies <a class="header-anchor" href="#updated-dependencies" aria-label="Permalink to &quot;Updated Dependencies&quot;">​</a></h3><div class="language-ruby vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ruby</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Runtime dependencies in gemspec</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">spec.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">add_dependency</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;faraday&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;~&gt; 2.0&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">spec.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">add_dependency</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;faraday-multipart&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;~&gt; 1.0&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">spec.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">add_dependency</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;faraday-follow_redirects&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;~&gt; 0.3&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">spec.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">add_dependency</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;marcel&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;~&gt; 1.0&#39;</span></span></code></pre></div><h2 id="results" tabindex="-1">Results <a class="header-anchor" href="#results" aria-label="Permalink to &quot;Results&quot;">​</a></h2><ul><li>✅ <strong>100% CI/CD success</strong>: All platforms (Windows, macOS, Linux) now pass</li><li>✅ <strong>Simplified dependencies</strong>: No external system requirements</li><li>✅ <strong>Consistent behavior</strong>: Identical HTTP handling across platforms</li><li>✅ <strong>Maintainable</strong>: Standard Ruby ecosystem patterns</li></ul><h2 id="key-learning" tabindex="-1">Key Learning <a class="header-anchor" href="#key-learning" aria-label="Permalink to &quot;Key Learning&quot;">​</a></h2><p>This migration demonstrates how choosing pure Ruby solutions over native dependencies can eliminate entire categories of platform compatibility issues, making the project more maintainable and reliable across diverse deployment environments.</p>`,17)]))}const g=a(t,[["render",l]]);export{c as __pageData,g as default};
