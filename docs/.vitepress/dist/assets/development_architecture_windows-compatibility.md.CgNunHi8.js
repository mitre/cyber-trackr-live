import{_ as s,c as a,o as e,at as t}from"./chunks/framework.BV4VMCSO.js";const k=JSON.parse('{"title":"Windows Compatibility","description":"","frontmatter":{},"headers":[],"relativePath":"development/architecture/windows-compatibility.md","filePath":"development/architecture/windows-compatibility.md"}'),n={name:"development/architecture/windows-compatibility.md"};function l(r,i,o,p,h,d){return e(),a("div",null,i[0]||(i[0]=[t(`<h1 id="windows-compatibility" tabindex="-1">Windows Compatibility <a class="header-anchor" href="#windows-compatibility" aria-label="Permalink to &quot;Windows Compatibility&quot;">​</a></h1><h2 id="problem-statement" tabindex="-1">Problem Statement <a class="header-anchor" href="#problem-statement" aria-label="Permalink to &quot;Problem Statement&quot;">​</a></h2><p>Many Ruby gems struggle with Windows compatibility due to:</p><ul><li>Native extensions requiring compilation tools</li><li>External library dependencies (like libcurl.dll)</li><li>Path handling differences</li><li>CI/CD complexity</li></ul><h2 id="our-solution-faraday" tabindex="-1">Our Solution: Faraday <a class="header-anchor" href="#our-solution-faraday" aria-label="Permalink to &quot;Our Solution: Faraday&quot;">​</a></h2><p>This project uses <strong>Faraday</strong> as the HTTP client for maximum Windows compatibility:</p><div class="language-ruby vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ruby</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ✅ Good - Uses Faraday (built into Ruby)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">gem </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;faraday&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;~&gt; 2.0&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">gem </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;faraday-multipart&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;~&gt; 1.0&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ❌ Avoided - typhoeus (requires libcurl.dll on Windows)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># gem &#39;typhoeus&#39;</span></span></code></pre></div><h2 id="benefits" tabindex="-1">Benefits <a class="header-anchor" href="#benefits" aria-label="Permalink to &quot;Benefits&quot;">​</a></h2><h3 id="no-external-dependencies" tabindex="-1">No External Dependencies <a class="header-anchor" href="#no-external-dependencies" aria-label="Permalink to &quot;No External Dependencies&quot;">​</a></h3><ul><li><strong>Pure Ruby implementation</strong> using Net::HTTP (built into Ruby)</li><li><strong>No libcurl.dll required</strong> - eliminates Windows CI/CD issues</li><li><strong>Cross-platform compatibility</strong> - works identically on Windows, macOS, Linux</li></ul><h3 id="proven-reliability" tabindex="-1">Proven Reliability <a class="header-anchor" href="#proven-reliability" aria-label="Permalink to &quot;Proven Reliability&quot;">​</a></h3><ul><li><strong>Widely adopted</strong> - More stable and mature than alternatives</li><li><strong>Consistent</strong> - Same HTTP client used in tests and generated client</li><li><strong>Future-proof</strong> - Less likely to break with OS updates</li></ul><h2 id="ci-cd-testing" tabindex="-1">CI/CD Testing <a class="header-anchor" href="#ci-cd-testing" aria-label="Permalink to &quot;CI/CD Testing&quot;">​</a></h2><p>Our GitHub Actions CI/CD pipeline tests across:</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">strategy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  matrix</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    os</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ubuntu-latest</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">windows-latest</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">macos-latest</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    ruby-version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;3.2&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;3.3&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;3.4&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span></code></pre></div><p><strong>Results</strong>: ✅ All tests pass on all platforms and Ruby versions</p><h2 id="development-on-windows" tabindex="-1">Development on Windows <a class="header-anchor" href="#development-on-windows" aria-label="Permalink to &quot;Development on Windows&quot;">​</a></h2><h3 id="prerequisites" tabindex="-1">Prerequisites <a class="header-anchor" href="#prerequisites" aria-label="Permalink to &quot;Prerequisites&quot;">​</a></h3><ul><li>Ruby 3.2+ (recommend RubyInstaller for Windows)</li><li>Git for Windows</li><li>No additional dependencies required</li></ul><h3 id="setup" tabindex="-1">Setup <a class="header-anchor" href="#setup" aria-label="Permalink to &quot;Setup&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Clone repository</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> clone</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://github.com/mitre/cyber-trackr-live.git</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> cyber-trackr-live</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Install dependencies (pure Ruby, no compilation needed)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">bundle</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Run tests</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">bundle</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> exec</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rake</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> test</span></span></code></pre></div><h3 id="common-issues-avoided" tabindex="-1">Common Issues Avoided <a class="header-anchor" href="#common-issues-avoided" aria-label="Permalink to &quot;Common Issues Avoided&quot;">​</a></h3><p><strong>Before (with typhoeus)</strong>:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>LoadError: Could not open library &#39;libcurl&#39;: Failed with error 126: </span></span>
<span class="line"><span>The specified module could not be found.</span></span></code></pre></div><p><strong>After (with Faraday)</strong>:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>✅ All tests passing across all platforms</span></span></code></pre></div><h2 id="openapi-client-generation" tabindex="-1">OpenAPI Client Generation <a class="header-anchor" href="#openapi-client-generation" aria-label="Permalink to &quot;OpenAPI Client Generation&quot;">​</a></h2><p>The generated client uses Faraday via the <code>--library=faraday</code> flag:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Automatic in our generation script</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">./scripts/generate_client.sh</span></span></code></pre></div><p>This ensures the generated client has the same Windows compatibility benefits.</p><h2 id="best-practices" tabindex="-1">Best Practices <a class="header-anchor" href="#best-practices" aria-label="Permalink to &quot;Best Practices&quot;">​</a></h2><p>When adding new dependencies:</p><ol><li><strong>Prefer pure Ruby</strong> over native extensions</li><li><strong>Test on Windows</strong> in addition to Unix systems</li><li><strong>Check gem platforms</strong> before adding dependencies</li><li><strong>Use GitHub Actions matrix</strong> for cross-platform CI/CD</li></ol><h2 id="related-documentation" tabindex="-1">Related Documentation <a class="header-anchor" href="#related-documentation" aria-label="Permalink to &quot;Related Documentation&quot;">​</a></h2><ul><li><a href="/development/architecture/faraday-migration.html">Faraday Migration Guide</a> - Technical details of the migration</li><li><a href="/reference/contributing.html">Contributing Guide</a> - Development setup for all platforms</li></ul>`,35)]))}const u=s(n,[["render",l]]);export{k as __pageData,u as default};
